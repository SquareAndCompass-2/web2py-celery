{{extend 'layout.html'}}

<table>
  <tr>
    <th>Hostname</th>
    <th>Last Heartbeat</th>
    <th>Actions</th>
  </tr>
  {{for worker in workers:}}
  <tr>
    <td>
      {{=A(worker.hostname,_href=URL('inspect_worker',args=worker.hostname))}}
    </td>
    <td {{if (request.now-worker.last_heartbeat).seconds>plugin_celery.HEARTBEAT_EXPIRE:}}style="color:red"{{pass}}>
      {{=worker.last_heartbeat}}
    </td>
    <td>
      [<a href="#" onclick="ajax('shutdown_worker/{{=worker.hostname}}',[],'');jQuery(this).closest('tr').remove();return False">shutdown</a>]
    </td>
  </tr>
  {{pass}}
</table>
